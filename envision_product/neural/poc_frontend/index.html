<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Envision Neural - Transportation Logistics AI</title>
    <link rel="stylesheet" href="./dist/output.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-neutral-50 text-neutral-800 min-h-screen">
    <!-- Top Header -->
    <header class="bg-white shadow-sm border-b border-neutral-200 fixed top-0 left-64 right-0 z-30 transition-all duration-300 ease-in-out" id="header">
        <div class="flex items-center justify-between px-6 py-4">
            <div class="flex items-center space-x-4">
                <!-- Logo and Title -->
                <div class="flex items-center space-x-3">
                    <div>
                        <h1 class="text-xl font-bold text-neutral-900">Dashboard</h1>
                        <p class="text-sm text-neutral-600">Transportation Logistics AI Platform</p>
                    </div>
                </div>
            </div>
            
            <!-- Header actions -->
            <div class="flex items-center space-x-4">
                <!-- You can add user menu, notifications, etc. here -->
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <aside id="sidebar" class="fixed top-0 left-0 h-full w-64 gradient-bg text-white transition-all duration-300 ease-in-out z-40">
        <div class="p-4 border-b border-white/10 relative">
            <!-- Expanded Header Content -->
            <div class="sidebar-expanded-header">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <div class="p-2 bg-white/10 rounded-lg flex-shrink-0">
                            <i class="fas fa-brain text-xl text-blue-300"></i>
                        </div>
                        <div>
                            <h2 class="text-lg font-semibold">Envision Neural</h2>
                            <p class="text-sm text-neutral-300">AI Platform</p>
                        </div>
                    </div>
                    <button id="sidebar-toggle" class="p-2 rounded-lg text-neutral-300 hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-white/20 transition-colors flex-shrink-0">
                        <i class="fas fa-chevron-left" id="sidebar-toggle-icon"></i>
                    </button>
                </div>
            </div>
            
            <!-- Collapsed Header Content -->
            <div class="sidebar-collapsed-header hidden absolute inset-0 flex items-center justify-center bg-gradient-to-r from-neutral-800 to-neutral-700">
                <button id="sidebar-toggle-collapsed" class="p-2 rounded-lg text-neutral-300 hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-white/20 transition-colors">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
        
        <!-- Navigation Menu -->
        <nav class="p-2">
            <ul class="space-y-1">
                <li>
                    <a href="#file-upload" class="nav-link flex items-center px-3 py-3 rounded-lg text-white bg-white/20 transition-all duration-300 group" data-section="file-upload" title="Data Upload">
                        <i class="fas fa-cloud-upload-alt text-lg flex-shrink-0 w-6 text-center"></i>
                        <span class="font-medium ml-3 sidebar-text whitespace-nowrap">Data Upload</span>
                    </a>
                </li>
                <li>
                    <a href="#model-training" class="nav-link flex items-center px-3 py-3 rounded-lg text-neutral-300 hover:bg-white/10 hover:text-white transition-all duration-300 group" data-section="model-training" title="Model Training">
                        <i class="fas fa-cogs text-lg flex-shrink-0 w-6 text-center"></i>
                        <span class="font-medium ml-3 sidebar-text whitespace-nowrap">Model Training</span>
                    </a>
                </li>
                <li>
                    <a href="#model-list" class="nav-link flex items-center px-3 py-3 rounded-lg text-neutral-300 hover:bg-white/10 hover:text-white transition-all duration-300 group" data-section="model-list" title="Models">
                        <i class="fas fa-list text-lg flex-shrink-0 w-6 text-center"></i>
                        <span class="font-medium ml-3 sidebar-text whitespace-nowrap">Models</span>
                    </a>
                </li>
                <li>
                    <a href="#predictions" class="nav-link flex items-center px-3 py-3 rounded-lg text-neutral-300 hover:bg-white/10 hover:text-white transition-all duration-300 group" data-section="predictions" title="Predictions">
                        <i class="fas fa-chart-line text-lg flex-shrink-0 w-6 text-center"></i>
                        <span class="font-medium ml-3 sidebar-text whitespace-nowrap">Predictions</span>
                    </a>
                </li>
            </ul>
        </nav>
        
        <!-- Sidebar Footer -->
        <div class="absolute bottom-0 left-0 right-0 p-3 border-t border-white/10">
            <div class="text-center sidebar-text">
                <div class="flex items-center justify-center space-x-3 mb-3">
                    <i class="fas fa-truck text-lg text-neutral-300"></i>
                    <i class="fas fa-shipping-fast text-lg text-neutral-300"></i>
                    <i class="fas fa-brain text-lg text-blue-300"></i>
                </div>
                <p class="text-xs text-neutral-300">&copy; 2025 Envision Neural</p>
                <p class="text-xs text-neutral-400">Transportation Logistics AI</p>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="pt-20 ml-64 transition-all duration-300 ease-in-out min-h-screen flex flex-col" id="main-content">
        <div class="flex-1">
            <div class="max-w-7xl mx-auto px-6 py-8">
                <!-- File Upload Section -->
                <section id="file-upload" class="block">
                    <div class="mb-8">
                        <h2 class="text-2xl font-bold text-neutral-900 flex items-center">
                            <i class="fas fa-cloud-upload-alt mr-3 text-primary-500"></i>
                            Data Upload
                        </h2>
                        <p class="text-neutral-600 mt-2">Upload your CSV data files for model training and analysis</p>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-neutral-200 p-8">
                        <h3 class="text-lg font-semibold text-neutral-900 mb-6 pb-3 border-b border-neutral-100">Upload Training Data</h3>
                        
                        <form id="upload-form" class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-neutral-700 mb-3">Select CSV File</label>
                                <div class="file-input-container relative border-2 border-dashed border-neutral-300 rounded-lg p-12 text-center transition-colors hover:border-primary-400 hover:bg-primary-50/50">
                                    <input type="file" id="file-input" accept=".csv" required class="absolute inset-0 w-full h-full opacity-0 cursor-pointer">
                                    <div class="file-input-helper">
                                        <i class="fas fa-cloud-upload-alt text-4xl text-neutral-400 mb-4"></i>
                                        <p class="text-lg text-neutral-600 mb-2">Drag and drop your CSV file here</p>
                                        <p class="text-sm text-neutral-500">or click to browse</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex space-x-4">
                                <button type="submit" class="inline-flex items-center px-6 py-3 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors">
                                    <i class="fas fa-upload mr-2"></i>
                                    Upload File
                                </button>
                                <button type="button" id="fetch-email-btn" class="inline-flex items-center px-6 py-3 bg-accent-600 text-white font-medium rounded-lg hover:bg-accent-700 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 transition-colors">
                                    <i class="fas fa-envelope mr-2"></i>
                                    Fetch from Email
                                </button>
                            </div>
                        </form>
                        
                        <div id="upload-result" class="mt-6"></div>
                        
                        <!-- File Preview -->
                        <div id="file-preview-container" class="hidden mt-8 pt-8 border-t border-neutral-100">
                            <h3 class="text-lg font-semibold text-neutral-900 mb-4 flex items-center">
                                <i class="fas fa-table mr-2 text-primary-500"></i>
                                File Preview
                            </h3>
                            <div id="file-info" class="bg-neutral-50 rounded-lg p-4 mb-6"></div>
                            <div id="preview-table-container" class="overflow-x-auto">
                                <table id="preview-table" class="min-w-full bg-white border border-neutral-200 rounded-lg overflow-hidden"></table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Model Training Section -->
                <section id="model-training" class="hidden">
                    <div class="mb-8">
                        <h2 class="text-2xl font-bold text-neutral-900 flex items-center">
                            <i class="fas fa-cogs mr-3 text-primary-500"></i>
                            Model Training
                        </h2>
                        <p class="text-neutral-600 mt-2">Train machine learning models on your uploaded data</p>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-neutral-200 p-8">
                        <h3 class="text-lg font-semibold text-neutral-900 mb-6 pb-3 border-b border-neutral-100">Train New Model</h3>
                        
                        <form id="training-form" class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="training-file-select" class="block text-sm font-medium text-neutral-700 mb-2">Training Data</label>
                                    <select id="training-file-select" class="w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors">
                                        <option value="">Select a file</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label for="model-type" class="block text-sm font-medium text-neutral-700 mb-2">Model Type</label>
                                    <select id="model-type" required class="w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors">
                                        <option value="">Select model type</option>
                                        <option value="order-volume">Order Volume</option>
                                        <option value="tender-performance">Tender Performance</option>
                                        <option value="carrier-performance">Carrier Performance</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div>
                                    <label for="epochs" class="block text-sm font-medium text-neutral-700 mb-2">Epochs</label>
                                    <input type="number" id="epochs" value="100" min="1" max="1000" class="w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors">
                                </div>
                                
                                <div>
                                    <label for="batch-size" class="block text-sm font-medium text-neutral-700 mb-2">Batch Size</label>
                                    <input type="number" id="batch-size" value="32" min="1" max="256" class="w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors">
                                </div>
                                
                                <div>
                                    <label for="validation-split" class="block text-sm font-medium text-neutral-700 mb-2">Validation Split</label>
                                    <input type="number" id="validation-split" value="0.2" min="0.1" max="0.5" step="0.1" class="w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors">
                                </div>
                            </div>
                            
                            <div>
                                <label for="model-description" class="block text-sm font-medium text-neutral-700 mb-2">Description</label>
                                <textarea id="model-description" rows="3" placeholder="Add a brief description of this model..." class="w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"></textarea>
                            </div>
                            
                            <button type="submit" class="inline-flex items-center px-6 py-3 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors">
                                <i class="fas fa-play mr-2"></i>
                                Start Training
                            </button>
                        </form>
                        
                        <div id="training-result" class="mt-6"></div>
                    </div>
                </section>

                <!-- Model List Section -->
                <section id="model-list" class="hidden">
                    <div class="mb-8">
                        <h2 class="text-2xl font-bold text-neutral-900 flex items-center">
                            <i class="fas fa-list mr-3 text-primary-500"></i>
                            Model Repository
                        </h2>
                        <p class="text-neutral-600 mt-2">View and manage your trained models</p>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-neutral-200 p-8">
                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 pb-3 border-b border-neutral-100">
                            <h3 class="text-lg font-semibold text-neutral-900">Available Models</h3>
                            
                            <div class="flex items-center space-x-4 mt-4 sm:mt-0">
                                <div>
                                    <label for="model-filter-type" class="sr-only">Filter by type</label>
                                    <select id="model-filter-type" class="px-4 py-2 border border-neutral-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors">
                                        <option value="">All Types</option>
                                        <option value="order_volume">Order Volume</option>
                                        <option value="tender_performance">Tender Performance</option>
                                        <option value="carrier_performance">Carrier Performance</option>
                                    </select>
                                </div>
                                <button id="refresh-models-btn" class="inline-flex items-center px-4 py-2 bg-neutral-600 text-white text-sm font-medium rounded-lg hover:bg-neutral-700 focus:outline-none focus:ring-2 focus:ring-neutral-500 focus:ring-offset-2 transition-colors">
                                    <i class="fas fa-sync-alt mr-2"></i>
                                    Refresh
                                </button>
                            </div>
                        </div>
                        
                        <div id="models-container" class="overflow-x-auto">
                            <table id="models-table" class="min-w-full bg-white">
                                <thead class="bg-neutral-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Model ID</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Type</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Created</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Metrics</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="models-table-body" class="bg-white divide-y divide-neutral-200"></tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Predictions Section -->
                <section id="predictions" class="hidden">
                    <div class="mb-8">
                        <h2 class="text-2xl font-bold text-neutral-900 flex items-center">
                            <i class="fas fa-chart-line mr-3 text-primary-500"></i>
                            Predictions
                        </h2>
                        <p class="text-neutral-600 mt-2">Generate predictions using your trained models</p>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-neutral-200 p-8">
                        <h3 class="text-lg font-semibold text-neutral-900 mb-6 pb-3 border-b border-neutral-100">Generate New Predictions</h3>
                        
                        <form id="prediction-form" class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="prediction-model-type" class="block text-sm font-medium text-neutral-700 mb-2">Model Type</label>
                                    <select id="prediction-model-type" required class="w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors">
                                        <option value="">Select model type</option>
                                        <option value="order-volume">Order Volume</option>
                                        <option value="tender-performance">Tender Performance</option>
                                        <option value="carrier-performance">Carrier Performance</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label for="prediction-model-select" class="block text-sm font-medium text-neutral-700 mb-2">Select Model</label>
                                    <select id="prediction-model-select" class="w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors">
                                        <option value="">Select a model</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div id="prediction-params" class="space-y-4">
                                <!-- Dynamic parameters will be inserted here -->
                            </div>
                            
                            <button type="submit" class="inline-flex items-center px-6 py-3 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors">
                                <i class="fas fa-magic mr-2"></i>
                                Generate Predictions
                            </button>
                        </form>
                        
                        <div id="prediction-result" class="mt-8">
                            <div id="prediction-summary" class="prediction-summary"></div>
                            <div id="prediction-table-container">
                                <table id="prediction-table" class="min-w-full bg-white border border-neutral-200 rounded-lg overflow-hidden mt-6"></table>
                            </div>
                            <div id="prediction-download" class="download-area mt-6"></div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- Model Details Modal -->
    <div id="model-details-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <div class="flex items-center justify-between p-6 border-b border-neutral-200">
                    <h2 class="text-xl font-semibold text-neutral-900">Model Details</h2>
                    <button class="close-btn text-neutral-400 hover:text-neutral-600 transition-colors">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <div id="model-details-content" class="p-6"></div>
            </div>
        </div>
    </div>

    <!-- Email Attachment Selection Modal -->
    <div id="email-attachment-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <div class="flex items-center justify-between p-6 border-b border-neutral-200">
                    <h2 class="text-xl font-semibold text-neutral-900 flex items-center">
                        <i class="fas fa-envelope mr-3 text-primary-500"></i>
                        Select Email Attachment
                    </h2>
                    <button id="close-email-modal" class="text-neutral-400 hover:text-neutral-600 transition-colors">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="p-6 space-y-6">
                    <div>
                        <h3 class="text-lg font-medium text-neutral-900 mb-4">Authentication Status</h3>
                        <div id="email-auth-status" class="flex items-center justify-between p-4 bg-neutral-50 rounded-lg">
                            <span id="email-auth-text" class="text-sm text-neutral-600">Checking authentication status...</span>
                            <button id="gmail-logout-btn" class="hidden inline-flex items-center px-3 py-1 bg-accent-600 text-white text-sm font-medium rounded hover:bg-accent-700 transition-colors">
                                <i class="fas fa-sign-out-alt mr-2"></i>
                                Logout
                            </button>
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-medium text-neutral-900 mb-4">Recent Emails</h3>
                        <div id="emails-list" class="border border-neutral-200 rounded-lg max-h-64 overflow-y-auto">
                            <div class="flex items-center justify-center py-8">
                                <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"></div>
                                <span class="ml-3 text-neutral-600">Loading emails...</span>
                            </div>
                        </div>
                    </div>
                    
                    <div id="attachments-section" class="hidden">
                        <h3 class="text-lg font-medium text-neutral-900 mb-4">Attachments</h3>
                        <p class="text-sm text-neutral-600 mb-4">Selected Email: <span id="selected-email-subject" class="font-medium">None</span></p>
                        <div id="attachments-list" class="border border-neutral-200 rounded-lg max-h-64 overflow-y-auto">
                            <div class="flex items-center justify-center py-8">
                                <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"></div>
                                <span class="ml-3 text-neutral-600">Loading attachments...</span>
                            </div>
                        </div>
                        
                        <div class="mt-4 p-4 bg-neutral-50 rounded-lg">
                            <label class="flex items-center">
                                <input type="checkbox" id="s3-upload-checkbox" checked class="h-4 w-4 text-primary-600 focus:ring-primary-500 border-neutral-300 rounded">
                                <span class="ml-3 text-sm font-medium text-neutral-700">Also upload to S3</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="flex items-center justify-end space-x-4 p-6 border-t border-neutral-200">
                    <button id="cancel-email-modal-btn" class="inline-flex items-center px-4 py-2 bg-neutral-600 text-white font-medium rounded-lg hover:bg-neutral-700 transition-colors">
                        <i class="fas fa-times mr-2"></i>
                        Cancel
                    </button>
                    <button id="fetch-attachment-btn" class="inline-flex items-center px-4 py-2 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors" disabled>
                        <i class="fas fa-download mr-2"></i>
                        Fetch Selected Attachment
                    </button>
                </div>
                
                <div id="email-modal-status" class="hidden"></div>
                <div id="s3-upload-status" class="hidden"></div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html> 